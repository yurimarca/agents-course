<CourseFloatingBanner chapter={2}
  classNames="absolute z-10 right-0 top-0"
  notebooks={[
    {label: "Google Colab", value: "https://colab.research.google.com/github/huggingface/agents-course/blob/main/notebooks/unit2/smolagents/multiagent_notebook.ipynb"},
]} />

# Sistemas Multi-Agente

Los sistemas multi-agente permiten que **agentes especializados colaboren en tareas complejas**, mejorando la modularidad, escalabilidad y robustez. En lugar de depender de un solo agente, las tareas se distribuyen entre agentes con capacidades distintas.

En **smolagents**, diferentes agentes pueden combinarse para generar cÃ³digo Python, llamar a herramientas externas, realizar bÃºsquedas web y mÃ¡s. Al orquestar estos agentes, podemos crear flujos de trabajo potentes.

Una configuraciÃ³n tÃ­pica podrÃ­a incluir:
- Un **Agente Gestor** para la delegaciÃ³n de tareas
- Un **Agente IntÃ©rprete de CÃ³digo** para la ejecuciÃ³n de cÃ³digo
- Un **Agente de BÃºsqueda Web** para la recuperaciÃ³n de informaciÃ³n

El diagrama a continuaciÃ³n ilustra una arquitectura multi-agente simple donde un **Agente Gestor** coordina una **Herramienta IntÃ©rprete de CÃ³digo** y un **Agente de BÃºsqueda Web**, que a su vez utiliza herramientas como `DuckDuckGoSearchTool` y `VisitWebpageTool` para recopilar informaciÃ³n relevante.

<img src="https://mermaid.ink/img/pako:eNp1kc1qhTAQRl9FUiQb8wIpdNO76eKubrmFks1oRg3VSYgjpYjv3lFL_2hnMWQOJwn5sqgmelRWleUSKLAtFs09jqhtoWuYUFfFAa6QA9QDTnpzamheuhxn8pt40-6l13UtS0ddhtQXj6dbR4XUGQg6zEYasTF393KjeSDGnDJKNxzj8I_7hLW5IOSmP9CH9hv_NL-d94d4DVNg84p1EnK4qlIj5hGClySWbadT-6OdsrL02MI8sFOOVkciw8zx8kaNspxnrJQE0fXKtjBMMs3JA-MpgOQwftIE9Bzj14w-cMznI_39E9Z3p0uFoA?type=png" style='background: white;'>

## Sistemas Multi-Agente en AcciÃ³n

Un sistema multi-agente consiste en mÃºltiples agentes especializados trabajando juntos bajo la coordinaciÃ³n de un **Agente Orquestador**. Este enfoque permite flujos de trabajo complejos distribuyendo tareas entre agentes con roles distintos.

Por ejemplo, un **sistema RAG Multi-Agente** puede integrar:
- Un **Agente Web** para navegar por internet.
- Un **Agente Recuperador** para obtener informaciÃ³n de bases de conocimiento.
- Un **Agente de GeneraciÃ³n de ImÃ¡genes** para producir elementos visuales.

Todos estos agentes operan bajo un orquestador que gestiona la delegaciÃ³n de tareas y la interacciÃ³n.

## Resolviendo una tarea compleja con una jerarquÃ­a multi-agente

<Tip>
Puedes seguir el cÃ³digo en <a href="https://huggingface.co/agents-course/notebooks/blob/main/unit2/smolagents/multiagent_notebook.ipynb" target="_blank">este notebook</a> que puedes ejecutar usando Google Colab.
</Tip>

Â¡La recepciÃ³n se acerca! Con tu ayuda, Alfred ya casi ha terminado con los preparativos.

Pero ahora hay un problema: el BatmÃ³vil ha desaparecido. Alfred necesita encontrar un reemplazo, y encontrarlo rÃ¡pidamente.

Afortunadamente, se han realizado algunas biografÃ­as cinematogrÃ¡ficas sobre la vida de Bruce Wayne, asÃ­ que tal vez Alfred podrÃ­a conseguir un automÃ³vil abandonado en uno de los sets de filmaciÃ³n y rediseÃ±arlo segÃºn los estÃ¡ndares modernos, lo que ciertamente incluirÃ­a una opciÃ³n de conducciÃ³n autÃ³noma completa.

Pero esto podrÃ­a estar en cualquier lugar de las locaciones de filmaciÃ³n alrededor del mundo, que podrÃ­an ser numerosas.

AsÃ­ que Alfred quiere tu ayuda. Â¿PodrÃ­as construir un agente capaz de resolver esta tarea?

> ğŸ‘‰ Encuentra todas las locaciones de filmaciÃ³n de Batman en el mundo, calcula el tiempo de transferencia en aviÃ³n de carga hasta allÃ­, y represÃ©ntalas en un mapa, con un color que varÃ­e segÃºn el tiempo de transferencia en aviÃ³n. TambiÃ©n representa algunas fÃ¡bricas de superdeportivos con el mismo tiempo de transferencia en aviÃ³n.

Â¡Vamos a construir esto!

Este ejemplo necesita algunos paquetes adicionales, asÃ­ que vamos a instalarlos primero:

```bash
pip install 'smolagents[litellm]' matplotlib geopandas shapely kaleido -q
```

### Primero creamos una herramienta para obtener el tiempo de transferencia del aviÃ³n de carga.

```python
import math
from typing import Optional, Tuple

from smolagents import tool


@tool
def calculate_cargo_travel_time(
    origin_coords: Tuple[float, float],
    destination_coords: Tuple[float, float],
    cruising_speed_kmh: Optional[float] = 750.0,  # Average speed for cargo planes
) -> float:
    """
    Calculate the travel time for a cargo plane between two points on Earth using great-circle distance.

    Args:
        origin_coords: Tuple of (latitude, longitude) for the starting point
        destination_coords: Tuple of (latitude, longitude) for the destination
        cruising_speed_kmh: Optional cruising speed in km/h (defaults to 750 km/h for typical cargo planes)

    Returns:
        float: The estimated travel time in hours

    Example:
        >>> # Chicago (41.8781Â° N, 87.6298Â° W) to Sydney (33.8688Â° S, 151.2093Â° E)
        >>> result = calculate_cargo_travel_time((41.8781, -87.6298), (-33.8688, 151.2093))
    """

    def to_radians(degrees: float) -> float:
        return degrees * (math.pi / 180)

    # Extract coordinates
    lat1, lon1 = map(to_radians, origin_coords)
    lat2, lon2 = map(to_radians, destination_coords)

    # Earth's radius in kilometers
    EARTH_RADIUS_KM = 6371.0

    # Calculate great-circle distance using the haversine formula
    dlon = lon2 - lon1
    dlat = lat2 - lat1

    a = (
        math.sin(dlat / 2) ** 2
        + math.cos(lat1) * math.cos(lat2) * math.sin(dlon / 2) ** 2
    )
    c = 2 * math.asin(math.sqrt(a))
    distance = EARTH_RADIUS_KM * c

    # Add 10% to account for non-direct routes and air traffic controls
    actual_distance = distance * 1.1

    # Calculate flight time
    # Add 1 hour for takeoff and landing procedures
    flight_time = (actual_distance / cruising_speed_kmh) + 1.0

    # Format the results
    return round(flight_time, 2)


print(calculate_cargo_travel_time((41.8781, -87.6298), (-33.8688, 151.2093)))
```

### Configurando el agente

Para el proveedor de modelos, usamos Together AI, Â¡uno de los nuevos [proveedores de inferencia en el Hub](https://huggingface.co/blog/inference-providers)!

La herramienta GoogleSearchTool usa la [API de Serper](https://serper.dev) para buscar en la web, por lo que requiere haber configurado la variable de entorno `SERPAPI_API_KEY` y pasar `provider="serpapi"` o tener `SERPER_API_KEY` y pasar `provider=serper`.

Si no tienes ningÃºn proveedor de Serp API configurado, puedes usar `DuckDuckGoSearchTool` pero ten en cuenta que tiene un lÃ­mite de tasa.

```python
import os
from PIL import Image
from smolagents import CodeAgent, GoogleSearchTool, HfApiModel, VisitWebpageTool

model = HfApiModel(model_id="Qwen/Qwen2.5-Coder-32B-Instruct", provider="together")
```

Podemos empezar creando un agente simple como base para darnos un informe simple.

```python
task = """Encuentra todas las locaciones de filmaciÃ³n de Batman en el mundo, calcula el tiempo de transferencia en aviÃ³n de carga hasta aquÃ­ (estamos en Gotham, 40.7128Â° N, 74.0060Â° W), y devuÃ©lvelas a mÃ­ como un dataframe de pandas.
TambiÃ©n dame algunas fÃ¡bricas de superdeportivos con el mismo tiempo de transferencia en aviÃ³n."""
```

```python
agent = CodeAgent(
    model=model,
    tools=[GoogleSearchTool("serper"), VisitWebpageTool(), calculate_cargo_travel_time],
    additional_authorized_imports=["pandas"],
    max_steps=20,
)
```

```python
result = agent.run(task)
```

```python
result
```

En nuestro caso, genera este output:

```python
|  | Location                                             | Travel Time to Gotham (hours) |
|--|------------------------------------------------------|------------------------------|
| 0  | Necropolis Cemetery, Glasgow, Scotland, UK         | 8.60                         |
| 1  | St. George's Hall, Liverpool, England, UK         | 8.81                         |
| 2  | Two Temple Place, London, England, UK             | 9.17                         |
| 3  | Wollaton Hall, Nottingham, England, UK           | 9.00                         |
| 4  | Knebworth House, Knebworth, Hertfordshire, UK    | 9.15                         |
| 5  | Acton Lane Power Station, Acton Lane, Acton, UK  | 9.16                         |
| 6  | Queensboro Bridge, New York City, USA            | 1.01                         |
| 7  | Wall Street, New York City, USA                  | 1.00                         |
| 8  | Mehrangarh Fort, Jodhpur, Rajasthan, India       | 18.34                        |
| 9  | Turda Gorge, Turda, Romania                      | 11.89                        |
| 10 | Chicago, USA                                     | 2.68                         |
| 11 | Hong Kong, China                                 | 19.99                        |
| 12 | Cardington Studios, Northamptonshire, UK        | 9.10                         |
| 13 | Warner Bros. Leavesden Studios, Hertfordshire, UK | 9.13                         |
| 14 | Westwood, Los Angeles, CA, USA                  | 6.79                         |
| 15 | Woking, UK (McLaren)                             | 9.13                         |
```

PodrÃ­amos mejorar esto un poco agregando algunos pasos de planificaciÃ³n y mÃ¡s instrucciones.

Los pasos de planificaciÃ³n permiten al agente pensar con anticipaciÃ³n y planificar sus prÃ³ximos pasos, lo que puede ser Ãºtil para tareas mÃ¡s complejas.

```python
agent.planning_interval = 4

detailed_report = agent.run(f"""
Eres un analista experto. Creas informes exhaustivos despuÃ©s de visitar muchos sitios web.
No dudes en buscar muchas consultas a la vez en un bucle for.
Para cada dato que encuentres, visita la URL de origen para confirmar los nÃºmeros.

{task}
""")

print(detailed_report)
```

```python
detailed_report
```

En nuestro caso, genera este output:

```python
|  | Location                                         | Travel Time (hours) |
|--|--------------------------------------------------|---------------------|
| 0  | Bridge of Sighs, Glasgow Necropolis, Glasgow, UK | 8.6                 |
| 1  | Wishart Street, Glasgow, Scotland, UK         | 8.6                 |
```


Gracias a estos cambios rÃ¡pidos, obtuvimos un informe mucho mÃ¡s conciso proporcionando simplemente una instrucciÃ³n detallada a nuestro agente y dÃ¡ndole capacidades de planificaciÃ³n.

El contexto de la ventana del modelo se estÃ¡ llenando rÃ¡pidamente. AsÃ­ que **si le pedimos a nuestro agente que combine los resultados de una bÃºsqueda detallada con otra, serÃ¡ mÃ¡s lento y rÃ¡pidamente aumentarÃ¡ los tokens y los costos**.

â¡ï¸ Necesitamos mejorar la estructura de nuestro sistema.

### âœŒï¸ Dividiendo la tarea entre dos agentes

Las estructuras multi-agente permiten separar memorias entre diferentes sub-tareas, con dos grandes beneficios:
- Cada agente estÃ¡ mÃ¡s enfocado en su tarea principal, por lo que es mÃ¡s performante
- Separar memorias reduce la cantidad de tokens de entrada en cada paso, reduciendo la latencia y el costo.

Vamos a crear un equipo con un agente de bÃºsqueda web dedicado, gestionado por otro agente.

El agente gestor debe tener capacidades de trazado para escribir su informe final: asÃ­ que vamos a darle acceso a importaciones adicionales, incluyendo `matplotlib`, y `geopandas` + `shapely` para trazado espacial.

```python
model = HfApiModel(
    "Qwen/Qwen2.5-Coder-32B-Instruct", provider="together", max_tokens=8096
)

web_agent = CodeAgent(
    model=model,
    tools=[
        GoogleSearchTool(provider="serper"),
        VisitWebpageTool(),
        calculate_cargo_travel_time,
    ],
    name="web_agent",
    description="Navega por la web para encontrar informaciÃ³n",
    verbosity_level=0,
    max_steps=10,
)
```

El agente gestor necesitarÃ¡ hacer algo de trabajo mental pesado.

AsÃ­ que le damos el modelo mÃ¡s fuerte [DeepSeek-R1](https://huggingface.co/deepseek-ai/DeepSeek-R1), y agregamos un `planning_interval` a la mezcla.

```python
from smolagents.utils import encode_image_base64, make_image_url
from smolagents import OpenAIServerModel


def check_reasoning_and_plot(final_answer, agent_memory):
    final_answer
    multimodal_model = OpenAIServerModel("gpt-4o", max_tokens=8096)
    filepath = "saved_map.png"
    assert os.path.exists(filepath), "AsegÃºrate de guardar el trazado bajo saved_map.png!"
    image = Image.open(filepath)
    prompt = (
        f"AquÃ­ estÃ¡ una tarea dada por el usuario y los pasos del agente: {agent_memory.get_succinct_steps()}. Ahora aquÃ­ estÃ¡ el trazado que se hizo."
        "Por favor, verifica que el proceso de razonamiento y el trazado sean correctos: Â¿responden correctamente a la tarea dada?"
        "Primero enumera razones por las que sÃ­/no, luego escribe tu decisiÃ³n final: PASS en mayÃºsculas si es satisfactorio, FAIL si no lo es."
        "No seas duro: si el trazado resuelve en gran medida la tarea, debe pasar."
        "Para pasar, un trazado debe hacerse usando px.scatter_map y no cualquier otro mÃ©todo (scatter_map se ve mejor)."
    )
    messages = [
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": prompt,
                },
                {
                    "type": "image_url",
                    "image_url": {"url": make_image_url(encode_image_base64(image))},
                },
            ],
        }
    ]
    output = multimodal_model(messages).content
    print("RetroalimentaciÃ³n: ", output)
    if "FAIL" in output:
        raise Exception(output)
    return True


manager_agent = CodeAgent(
    model=HfApiModel("deepseek-ai/DeepSeek-R1", provider="together", max_tokens=8096),
    tools=[calculate_cargo_travel_time],
    managed_agents=[web_agent],
    additional_authorized_imports=[
        "geopandas",
        "plotly",
        "shapely",
        "json",
        "pandas",
        "numpy",
    ],
    planning_interval=5,
    verbosity_level=2,
    final_answer_checks=[check_reasoning_and_plot],
    max_steps=15,
)
```

Vamos a inspeccionar quÃ© se ve este equipo:

```python
manager_agent.visualize()
```

Esto generarÃ¡ algo como esto, ayudÃ¡ndonos a entender la estructura y la relaciÃ³n entre agentes y herramientas utilizadas:

```python
CodeAgent | deepseek-ai/DeepSeek-R1
â”œâ”€â”€ âœ… Authorized imports: ['geopandas', 'plotly', 'shapely', 'json', 'pandas', 'numpy']
â”œâ”€â”€ ğŸ› ï¸ Tools:
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”‚   â”ƒ Name                        â”ƒ Description                           â”ƒ Arguments                             â”ƒ
â”‚   â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚   â”‚ calculate_cargo_travel_time â”‚ Calculate the travel time for a cargo â”‚ origin_coords (`array`): Tuple of     â”‚
â”‚   â”‚                             â”‚ plane between two points on Earth     â”‚ (latitude, longitude) for the         â”‚
â”‚   â”‚                             â”‚ using great-circle distance.          â”‚ starting point                        â”‚
â”‚   â”‚                             â”‚                                       â”‚ destination_coords (`array`): Tuple   â”‚
â”‚   â”‚                             â”‚                                       â”‚ of (latitude, longitude) for the      â”‚
â”‚   â”‚                             â”‚                                       â”‚ destination                           â”‚
â”‚   â”‚                             â”‚                                       â”‚ cruising_speed_kmh (`number`):        â”‚
â”‚   â”‚                             â”‚                                       â”‚ Optional cruising speed in km/h       â”‚
â”‚   â”‚                             â”‚                                       â”‚ (defaults to 750 km/h for typical     â”‚
â”‚   â”‚                             â”‚                                       â”‚ cargo planes)                         â”‚
â”‚   â”‚ final_answer                â”‚ Provides a final answer to the given  â”‚ answer (`any`): The final answer to   â”‚
â”‚   â”‚                             â”‚ problem.                              â”‚ the problem                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€ ğŸ¤– Managed agents:
    â””â”€â”€ web_agent | CodeAgent | Qwen/Qwen2.5-Coder-32B-Instruct
        â”œâ”€â”€ âœ… Authorizar imports: []
        â”œâ”€â”€ ğŸ“ Description: Navega por la web para encontrar informaciÃ³n
        â””â”€â”€ ğŸ› ï¸ Tools:
            â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
            â”ƒ Name                        â”ƒ Description                       â”ƒ Arguments                         â”ƒ
            â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
            â”‚ web_search                  â”‚ Performs a google web search for  â”‚ query (`string`): The search      â”‚
            â”‚                             â”‚ your query then returns a string  â”‚ query to perform.                 â”‚
            â”‚                             â”‚ of the top search results.        â”‚ filter_year (`integer`):          â”‚
            â”‚                             â”‚                                   â”‚ Optionally restrict results to a  â”‚
            â”‚                             â”‚                                   â”‚ certain year                      â”‚
            â”‚ visit_webpage               â”‚ Visits a webpage at the given url â”‚ url (`string`): The url of the    â”‚
            â”‚                             â”‚ and reads its content as a        â”‚ webpage to visit.                 â”‚
            â”‚                             â”‚ markdown string. Use this to      â”‚                                   â”‚
            â”‚                             â”‚ browse webpages.                  â”‚                                   â”‚
            â”‚ calculate_cargo_travel_time â”‚ Calculate the travel time for a   â”‚ origin_coords (`array`): Tuple of â”‚
            â”‚                             â”‚ cargo plane between two points on â”‚ (latitude, longitude) for the     â”‚
            â”‚                             â”‚ Earth using great-circle          â”‚ starting point                    â”‚
            â”‚                             â”‚ distance.                         â”‚ destination_coords (`array`):     â”‚
            â”‚                             â”‚                                   â”‚ Tuple of (latitude, longitude)    â”‚
            â”‚                             â”‚                                   â”‚ for the destination               â”‚
            â”‚                             â”‚                                   â”‚ cruising_speed_kmh (`number`):    â”‚
            â”‚                             â”‚                                   â”‚ Optional cruising speed in km/h   â”‚
            â”‚                             â”‚                                   â”‚ (defaults to 750 km/h for typical â”‚
            â”‚                             â”‚                                   â”‚ cargo planes)                     â”‚
            â”‚ final_answer                â”‚ Provides a final answer to the    â”‚ answer (`any`): The final answer  â”‚
            â”‚                             â”‚ given problem.                    â”‚ to the problem                    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```python
manager_agent.run("""
Encuentra todas las locaciones de filmaciÃ³n de Batman en el mundo, calcula el tiempo de transferencia en aviÃ³n de carga hasta aquÃ­ (estamos en Gotham, 40.7128Â° N, 74.0060Â° W).
TambiÃ©n dame algunas fÃ¡bricas de superdeportivos con el mismo tiempo de transferencia en aviÃ³n.
Necesito al menos 6 puntos en total.
Representa esto como un mapa espacial del mundo, con las locaciones representadas como puntos de dispersiÃ³n con un color que depende del tiempo de transferencia, y guÃ¡rdalo en saved_map.png!

AquÃ­ hay un ejemplo de cÃ³mo trazar y devolver un mapa:
import plotly.express as px
df = px.data.carshare()
fig = px.scatter_map(df, lat="centroid_lat", lon="centroid_lon", text="name", color="peak_hour", size=100,
     color_continuous_scale=px.colors.sequential.Magma, size_max=15, zoom=1)
fig.show()
fig.write_image("saved_image.png")
final_answer(fig)

Nunca intentes procesar cadenas usando cÃ³digo: cuando tengas una cadena para leer, simplemente imprÃ­mela y la verÃ¡s.
""")
```

No sÃ© cÃ³mo saliÃ³ en tu ejecuciÃ³n, pero en la mÃ­a, el agente gestor dividiÃ³ hÃ¡bilmente las tareas dadas al agente web en `1. Buscar locaciones de filmaciÃ³n de Batman`, luego `2. Encontrar fÃ¡bricas de superdeportivos`, antes de agregar las listas y trazar el mapa.

Vamos a ver quÃ© se ve el mapa inspeccionÃ¡ndolo directamente desde el estado del agente:

```python
manager_agent.python_executor.state["fig"]
```

Esto generarÃ¡ el mapa:

![Multiagent system example output map](https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/unit2/smolagents/output_map.png)

## Recursos

- [Sistemas Multi-Agente](https://huggingface.co/docs/smolagents/main/en/examples/multiagents) â€“ VisiÃ³n general de los sistemas multi-agente.  
- [Â¿QuÃ© es Agentic RAG?](https://weaviate.io/blog/what-is-agentic-rag) â€“ IntroducciÃ³n a Agentic RAG.  
- [Sistema RAG Multi-Agente ğŸ¤–ğŸ¤ğŸ¤– Receta](https://huggingface.co/learn/cookbook/multiagent_rag_system) â€“ GuÃ­a paso a paso para construir un sistema RAG multi-agente.  
